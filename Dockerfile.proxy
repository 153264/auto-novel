FROM node:19.0-slim AS builder

COPY ./frontend /frontend

WORKDIR /frontend

RUN npm install --registry=https://registry.npm.taobao.org; \
    npm run build



FROM caddy:2.6.2

COPY --from=builder /frontend/dist /frontend/dist

COPY Caddyfile /etc/caddy/Caddyfile